/*!
 * Author: Tony Brix, me@tonybrix.info
 * License: MIT 
 * Description: Sort tables by clicking on headers
 */
(function(c,d){var b="tablesort";c[b]=function(f,e){var g;if(c(f).data(b)){g=c(f).data(b)}else{g=this;g.$table=c(f);g.$table.data(b,g)}if(typeof e==="object"||e===d){g._init(e)}else{if(typeof e==="string"&&e.substring(0,1)!=="_"&&typeof g[e]==="function"){g[e].apply(g,Array.prototype.slice.call(arguments,1))}else{throw"Invalid Arguments"}}};var a={_defaults:{sorttypes:{date:function(g,f){var h=new Date(g);var e=new Date(f);if(h<e){return -1}if(h>e){return 1}return 0},time:function(g,f){var j,e;var i=(g.substring(0,1)==="-");var h=(f.substring(0,1)==="-");if(i&&h){j=new Date("2000-01-01 "+f.substring(1));e=new Date("2000-01-01 "+g.substring(1))}else{if(i||h){j=+h;e=+i}else{j=new Date("2000-01-01 "+g);e=new Date("2000-01-01 "+f)}}if(j<e){return -1}if(j>e){return 1}return 0},number:function(g,f){var h=Number(g.replace(/,/g,""));var e=Number(f.replace(/,/g,""));if(h<e){return -1}if(h>e){return 1}return 0},string:function(g,f){var h=g.toLowerCase();var e=f.toLowerCase();if(h<e){return -1}if(h>e){return 1}return 0}},initColumn:false,initDirection:"asc"},_init:function(e){var g=this;if(g.initialized){throw"Already Initialized"}if(e===d){g.options=g._defaults}else{e.sorttypes=c.extend({},g._defaults.sorttypes,e.sorttypes);g.options=c.extend({},g._defaults,e)}g.$thead=c("thead",g.$table);g.$tbody=c("tbody",g.$table);g.$ths=c("tr th",g.$thead);g.$tds=c("tr td",g.$tbody);g.$rows=c("tr",g.$tbody);g.$table.addClass("tablesort");g.$ths.each(function(j){var l=c(this);var k="tablesort-"+j;l.addClass(k).data({column:k});g.$tds.filter(":nth-child("+(j+1)+")").addClass(k)}).wrapInner("<span class='tablesort-label' />").append("<span class='tablesort-arrows'><div><span class='tablesort-sortdesc'>&#9650;</span><span class='tablesort-sortasc'>&#9660;</span></div></span>").wrapInner("<div class='tablesort-th' />").on("click.tablesort",function(o){var n=c(this);if(n.hasClass("sortable")){var i=c(o.target);var j=g.$thead.data().sort||" ";var m=j.split(" ");var k=n.data().column;var l="asc";if(i.hasClass("tablesort-sortdesc")||(m[0]===k&&m[1]==="asc"&&!i.hasClass("tablesort-sortasc"))){l="desc"}if(j===k+" "+l){return}if(m[0]){c("."+m[0],g.$thead).removeClass("tablesort-"+m[1])}g._sort(k,l)}});if(g.options.initColumn!==false){var f=(c.isNumeric(g.options.initColumn)?"tablesort-"+g.options.initColumn:g.options.initColumn);var h=(g.options.initDirection.toLowerCase()==="desc"?"desc":"asc");g._sort(f,h)}g.initialized=true},destroy:function(){var e=this;e.$ths.off(".tablesort").each(function(f){var h=c(this);var g="tablesort-"+f;h.removeClass(g).unwrapInner("span.tablesort-th").unwrapInner("span.tablesort-label").find(".tablesort-arrows").remove();delete h.data().column;e.$tds.filter(":nth-child("+(f+1)+")").removeClass(g)});delete e.$table.data()[b]},_sort:function(f,j){var h=this;var i=c("."+f,h.$thead);var e=i.data().sorttype||"string";h.$thead.data({sort:f+" "+j});i.addClass("tablesort-"+j);var g=(j==="asc"?1:-1);h.$rows.sort(function(l,k){var n=c("."+f,l).text();var m=c("."+f,k).text();return g*h.options.sorttypes[e](n,m)}).appendTo(h.$tbody)}};c[b].prototype=a;c.fn[b]=function(e){return this.each(function(){new c[b](this,e)})};c(function(){var e=c("<style class='"+b+"-stylesheet'>.tablesort-arrows{display: none;}.sortable{cursor: pointer;}.sortable .tablesort-th{display: table;width: 100%;}.sortable .tablesort-arrows{display: table-cell;width: 1.1em;vertical-align: middle;}.sortable .tablesort-arrows div{position: relative;width: 1.1em;min-height: 2.2em;}.sortable .tablesort-label{display: table-cell;vertical-align: middle;}.sortable .tablesort-sortdesc, .sortable .tablesort-sortasc{position: absolute;right: 0px;color: #666;}.sortable .tablesort-sortdesc{top: 0px;}.sortable .tablesort-sortasc{top: 1em;}.sortable.tablesort-desc .tablesort-sortdesc, .sortable.tablesort-asc .tablesort-sortasc{color: #fff;}</style>");var f=c("head link[rel='stylesheet'], head style");if(f.length>0){f.eq(0).before(e)}else{c("head").append(e)}});c.fn.extend({unwrapInner:function(e){return this.each(function(){var f=this,g=c(f).children(e);if(g.length===1){g.contents().appendTo(f);g.remove()}})}})}(jQuery));